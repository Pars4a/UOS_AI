<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Haawall University Assistant</title>
    <link rel="shortcut icon" href="static/images/uos-icon.ico" type="image/x-icon">
    <link rel="stylesheet" href="static/stylecontact.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="mobile-menu-icon" onclick="toggleMenu()">â˜°</div>
        <nav class="main-nav left desktop-only">
            <a href="/" class="nav-link">Home</a>
            <a href="about" class="nav-link">About</a>
        </nav>
        <div class="logo">
            <div class="logo-icon">Haawall</div>
        </div>
        <nav class="main-nav right desktop-only">
            <button onclick="toggleLanguage()" id="langSwitchBtn" class="lang-toggle">Ú©ÙˆØ±Ø¯ÛŒ</button>
            <a href="contact" class="nav-link active">Contact Us</a>
        </nav>
        <div class="mobile-controls">
            <button onclick="toggleLanguage()" id="langSwitchBtnMobile" class="lang-toggle">Ú©ÙˆØ±Ø¯ÛŒ</button>
        </div>
        <div class="mobile-menu hidden" id="mobileMenu">
            <a href="/" class="nav-link">Home</a>
            <a href="/about" class="nav-link">About</a>
            <a href="/contact" class="nav-link active">Contact Us</a>
        </div>
    </div>

    <!-- Contact Content -->
    <div class="contact-container">
        <div class="contact-header">
            <h1 class="contact-title" id="contactTitle">Get in Touch</h1>
            <p class="contact-subtitle" id="contactSubtitle">
                We'd love to hear from you! Send us your feedback, questions, or suggestions and help us improve Haawall.
            </p>
        </div>

        <div class="contact-content">
            <!-- Contact Information -->
            <div class="contact-info">
                <div class="info-card">
                    <h2 class="info-title" id="infoTitle">Contact Information</h2>
                    
                    <div class="info-item">
                        <div class="info-icon">ğŸ“</div>
                        <div class="info-text">
                            <div class="info-label" id="addressLabel">Address</div>
                            <div class="info-value" id="addressValue">
                                College of Engineering, University of Sulaimani<br>
                                (New Campus), Tasluja Street 1, Zone 501<br>
                                Sulaymaniyah, Kurdistan Region of Iraq
                            </div>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="info-icon">âœ‰ï¸</div>
                        <div class="info-text">
                            <div class="info-label" id="emailLabel">Email</div>
                            <div class="info-value">
                                <a href="mailto:haawell.bot@gmail.com">haawell.bot@gmail.com</a>
                            </div>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="info-icon">ğŸ“</div>
                        <div class="info-text">
                            <div class="info-label" id="departmentLabel">Department</div>
                            <div class="info-value" id="departmentValue">Computer Engineering</div>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="info-icon">ğŸ¤–</div>
                        <div class="info-text">
                            <div class="info-label" id="serviceLabel">Service Hours</div>
                            <div class="info-value" id="serviceValue">24/7 AI Assistant Available</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Feedback Form -->
            <div class="contact-form">
                <div class="form-card">
                    <h2 class="form-title" id="formTitle">Send us your Feedback</h2>
                    
                    <div id="messageContainer"></div>

                    <form id="feedbackForm">
                        <div class="form-group">
                            <label for="name" class="form-label" id="nameLabel">Full Name</label>
                            <input type="text" id="name" name="name" class="form-input" required>
                        </div>

                        <div class="form-group">
                            <label for="email" class="form-label" id="emailFieldLabel">Email Address</label>
                            <input type="email" id="email" name="email" class="form-input" required>
                        </div>

                        <div class="form-group">
                            <label for="category" class="form-label" id="categoryLabel">Category</label>
                            <select id="category" name="category" class="form-select" required>
                                <option value="" id="selectCategory">Select a category</option>
                                <option value="feedback" id="feedbackOption">General Feedback</option>
                                <option value="suggestion" id="suggestionOption">Suggestion</option>
                                <option value="bug" id="bugOption">Bug Report</option>
                                <option value="feature" id="featureOption">Feature Request</option>
                                <option value="other" id="otherOption">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="subject" class="form-label" id="subjectLabel">Subject</label>
                            <input type="text" id="subject" name="subject" class="form-input" required>
                        </div>

                        <div class="form-group">
                            <label for="message" class="form-label" id="messageLabel">Message</label>
                            <textarea id="message" name="message" class="form-textarea" placeholder="Tell us what you think..." required></textarea>
                        </div>

                        <button type="submit" class="submit-btn" id="submitBtn">
                            <span id="submitText">Send Message</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Language Script -->
    <script>
        let currentLang = 'en';

const translations = {
    en: {
        switchText: "Ú©ÙˆØ±Ø¯ÛŒ",
        contactTitle: "Get in Touch",
        contactSubtitle: "We'd love to hear from you! Send us your feedback, questions, or suggestions and help us improve Haawall.",
        infoTitle: "Contact Information",
        addressLabel: "Address",
        addressValue: "College of Engineering, University of Sulaimani<br>(New Campus), Tasluja Street 1, Zone 501<br>Sulaymaniyah, Kurdistan Region of Iraq",
        emailLabel: "Email",
        departmentLabel: "Department",
        departmentValue: "Computer Engineering",
        serviceLabel: "Service Hours",
        serviceValue: "24/7 AI Assistant Available",
        formTitle: "Send us your Feedback",
        nameLabel: "Full Name",
        emailFieldLabel: "Email Address",
        categoryLabel: "Category",
        selectCategory: "Select a category",
        feedbackOption: "General Feedback",
        suggestionOption: "Suggestion",
        bugOption: "Bug Report",
        featureOption: "Feature Request",
        otherOption: "Other",
        subjectLabel: "Subject",
        messageLabel: "Message",
        submitText: "Send Message",
        messagePlaceholder: "Tell us what you think..."
        

    },
    ku: {
        switchText: "English",
        contactTitle: "Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒÙ…Ø§Ù† Ù¾ÛÙˆÛ• Ø¨Ú©Û•",
        contactSubtitle: "Ø®Û†Ø´Ø­Ø§Úµ Ø¯Û•Ø¨ÛŒÙ† Ù¾Û•ÛŒÙˆÛ•Ù†ÛŒÙ…Ø§Ù† Ù¾ÛÙˆÛ• Ø¨Ú©Û•ÛŒØª! Ú•Ø§Ùˆ Ù¾ÛØ´Ù†ÛŒØ§Ø± Ùˆ Ù¾Ø±Ø³ÛŒØ§Ø±Û•Ú©Ø§Ù†Øª Ø¨Ù†ÛØ±Û• Ø¨Û†Ù…Ø§Ù† Ø¨Û† Ø¨Ø§Ø´ØªØ±Ú©Ø±Ø¯Ù†ÛŒ Ù‡Ø§ÙˆØ§Úµ",
        infoTitle: "Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒ",
        addressLabel: "Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù†",
        addressValue: "Ú©Û†Ù„ÛÚ˜ÛŒ Ø¦Û•Ù†Ø¯Ø§Ø²ÛŒØ§Ø±ÛŒØŒ Ø²Ø§Ù†Ú©Û†ÛŒ Ø³Ù„ÛÙ…Ø§Ù†ÛŒ<br>(Ú©Û•Ù…Ù¾ÛŒ Ù†ÙˆÛ)ØŒ Ø´Û•Ù‚Ø§Ù…ÛŒ ØªØ§Ø³Ù„ÙˆÚ˜Ø§ Ú˜Ù…Ø§Ø±Û• Ù¡ØŒ Ù†Ø§ÙˆÚ†Û• Ù¥Ù Ù¡<br>Ø³Ù„ÛÙ…Ø§Ù†ÛŒØŒ Ù‡Û•Ø±ÛÙ…ÛŒ Ú©ÙˆØ±Ø¯Ø³ØªØ§Ù†ØŒ Ø¹ÛØ±Ø§Ù‚",
        emailLabel: "Ø¦ÛŒÙ…Û•ÛŒÙ„",
        departmentLabel: "Ø¨Û•Ø´",
        departmentValue: "Ø¦Û•Ù†Ø¯Ø§Ø²ÛŒØ§Ø±ÛŒ Ú©Û†Ù…Ù¾ÛŒÙˆØªÛ•Ø±",
        serviceLabel: "Ú©Ø§ØªÛŒ Ø®Ø²Ù…Û•ØªÚ¯ÙˆØ²Ø§Ø±ÛŒ",
        serviceValue: "ÛŒØ§Ø±Ù…Û•ØªÛŒØ¯Û•Ø±ÛŒ Ø¦Ø§ÛŒ Ø¦Ø§ÛŒ Ù¢Ù¤/Ù§ Ø¨Û•Ø±Ø¯Û•Ø³ØªÛ•",
        formTitle: "Ú•Ø§ Ùˆ Ù¾ÛØ´Ù†ÛŒØ§Ø±Û•Ú©Ø§Ù†Øª Ø¨Ù†ÛØ±Û•",
        nameLabel: "Ù†Ø§ÙˆÛŒ ØªÛ•ÙˆØ§Ùˆ",
        emailFieldLabel: "Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù†ÛŒ Ø¦ÛŒÙ…Û•ÛŒÙ„",
        categoryLabel: "Ø¬Û†Ø±",
        selectCategory: "Ø¬Û†Ø±ÛÚ© Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•",
        feedbackOption: "Ú•Ø§ÛŒ Ú¯Ø´ØªÛŒ",
        suggestionOption: "Ù¾ÛØ´Ù†ÛŒØ§Ø±",
        bugOption: "Ú¯ÙˆØ²Ø§Ø±Ø´ØªÛŒ Ù‡Û•ÚµÛ•",
        featureOption: "Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ",
        otherOption: "Ù‡ÛŒØªØ±",
        subjectLabel: "Ø³Û•Ø±Ø¯ÛÚ•",
        messageLabel: "Ù¾Û•ÛŒØ§Ù…",
        submitText: "Ù¾Û•ÛŒØ§Ù… Ø¨Ù†ÛØ±Û•",
        messagePlaceholder: "Ø¦Û†Ø²Ù…ÙˆÙˆÙ†ÛŒ Ø®Û†Øª Ø¨Ù†ÙˆÙˆØ³Û•..."
    }
};

function toggleMenu() {
    const mobileMenu = document.getElementById('mobileMenu');
    mobileMenu.classList.toggle('hidden');
}

function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'ku' : 'en';
    const t = translations[currentLang];

    document.getElementById("langSwitchBtn").innerText = t.switchText;
    document.getElementById("langSwitchBtnMobile").innerText = t.switchText;
    document.getElementById("contactTitle").innerText = t.contactTitle;
    document.getElementById("contactSubtitle").innerText = t.contactSubtitle;
    document.getElementById("infoTitle").innerText = t.infoTitle;
    document.getElementById("addressLabel").innerText = t.addressLabel;
    document.getElementById("addressValue").innerHTML = t.addressValue;
    document.getElementById("emailLabel").innerText = t.emailLabel;
    document.getElementById("departmentLabel").innerText = t.departmentLabel;
    document.getElementById("departmentValue").innerText = t.departmentValue;
    document.getElementById("serviceLabel").innerText = t.serviceLabel;
    document.getElementById("serviceValue").innerText = t.serviceValue;
    document.getElementById("formTitle").innerText = t.formTitle;
    document.getElementById("nameLabel").innerText = t.nameLabel;
    document.getElementById("emailFieldLabel").innerText = t.emailFieldLabel;
    document.getElementById("categoryLabel").innerText = t.categoryLabel;
    document.getElementById("selectCategory").innerText = t.selectCategory;
    document.getElementById("feedbackOption").innerText = t.feedbackOption;
    document.getElementById("suggestionOption").innerText = t.suggestionOption;
    document.getElementById("bugOption").innerText = t.bugOption;
    document.getElementById("featureOption").innerText = t.featureOption;
    document.getElementById("otherOption").innerText = t.otherOption;
    document.getElementById("subjectLabel").innerText = t.subjectLabel;
    document.getElementById("messageLabel").innerText = t.messageLabel;
    document.getElementById("submitText").innerText = t.submitText;
    document.getElementById("message").placeholder = t.messagePlaceholder;
}

// Form submission handling - FIXED VERSION
document.getElementById('feedbackForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const submitBtn = document.getElementById('submitBtn');
    const submitText = document.getElementById('submitText');
    const messageContainer = document.getElementById('messageContainer');
    
    // Show loading state
    submitBtn.disabled = true;
    submitBtn.style.opacity = '0.6';
    submitBtn.style.cursor = 'not-allowed';
    const loadingText = currentLang === 'ku' ? 'Ù†Ø§Ø±Ø¯Ù†...' : 'Sending...';
    submitText.innerHTML = `<div class="loading" style="display: inline-block; width: 16px; height: 16px; border: 2px solid rgba(255,255,255,0.3); border-left: 2px solid white; border-radius: 50%; animation: spin 1s linear infinite; margin-right: 8px;"></div> ${loadingText}`;
    
    // Get form data
    const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        category: document.getElementById('category').value,
        subject: document.getElementById('subject').value,
        message: document.getElementById('message').value
    };
    
    try {
        console.log('Sending feedback data:', formData);
        
        const response = await fetch('/feedback', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify(formData)
        });
        
        console.log('Response status:', response.status);
        console.log('Response headers:', response.headers);
        
        const result = await response.json();
        console.log('Response data:', result);
        
        // Check if response is ok
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status} - ${result.message || 'Unknown error'}`);
        }
        
        if (result.success) {
            // Show success message
            messageContainer.innerHTML = `
                <div class="message success" style="display: block !important; padding: 15px; margin: 15px 0; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; border-radius: 8px; font-size: 16px; font-weight: 500;">
                    âœ… ${currentLang === 'ku' ? 'Ø³ÙˆÙ¾Ø§Ø³! Ù¾Û•ÛŒØ§Ù…Û•Ú©Û•Øª Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ù†ÛØ±Ø¯Ø±Ø§ Ùˆ Ø¦ÛŒÙ…Û•ÛŒÙ„ÛŒ Ù¾Ø´ØªÚ•Ø§Ø³ØªÚ©Ø±Ø¯Ù†Û•ÙˆÛ•Ø´ Ø¨Û† Ù†Ø§Ø±Ø¯Ø±Ø§.' : 'Thank you! Your message has been sent successfully and a confirmation email was sent to you.'}
                    <br><br>
                    ğŸ“§ ${currentLang === 'ku' ? 'ØªÚ©Ø§ÛŒÛ• Ø¦ÛŒÙ…Û•ÛŒÙ„Û•Ú©Ø§Ù†Øª Ø¨Ù¾Ø´Ú©Ù†Û• (Ù„Û•ÙˆØ§Ù†Û•ÛŒÛ• Ù„Û• spam ÙÛ†ÚµØ¯Û•Ø±Ø¯Ø§ Ø¨ÛØª)' : 'Please check your email (it might be in spam folder)'}
                </div>
            `;
            
            // Also show an alert for testing
           
            
            // Reset form
            document.getElementById('feedbackForm').reset();
        } else {
            // Show error message  
            const errorMsg = result.message || (currentLang === 'ku' ? 'Ø¨Ø¨ÙˆØ±Û•ØŒ Ù‡Û•ÚµÛ•ÛŒÛ•Ú© Ú•ÙˆÛŒØ¯Ø§. ØªÚ©Ø§ÛŒÛ• Ø¯ÙˆØ§ØªØ± Ù‡Û•ÙˆÚµØ¨Ø¯Û•ÙˆÛ•.' : 'Sorry, there was an error. Please try again later.');
            messageContainer.innerHTML = `
                <div class="message error" style="display: block !important; padding: 15px; margin: 15px 0; background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; border-radius: 8px; font-size: 16px; font-weight: 500;">
                    âŒ ${errorMsg}
                </div>
            `;
            
            // Also show an alert for testing
        
        }
    } catch (error) {
        console.error('Error details:', error);
        const errorMessage = error.message || (currentLang === 'ku' ? 'Ú©ÛØ´Û•ÛŒÛ•Ú© Ù„Û• Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒØ¯Ø§ Ù‡Û•ÛŒÛ•. ØªÚ©Ø§ÛŒÛ• Ø¯ÙˆØ§ØªØ± Ù‡Û•ÙˆÚµØ¨Ø¯Û•ÙˆÛ•' : 'Connection error. Please try again later.');
        messageContainer.innerHTML = `
            <div class="message error" style="display: block !important; padding: 15px; margin: 15px 0; background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; border-radius: 8px; font-size: 16px; font-weight: 500;">
                âŒ ${errorMessage}
            </div>
        `;
    } finally {
        // Reset button state
        submitBtn.disabled = false;
        submitBtn.style.opacity = '1';
        submitBtn.style.cursor = 'pointer';
        submitText.innerText = currentLang === 'ku' ? 'Ù¾Û•ÛŒØ§Ù… Ø¨Ù†ÛØ±Û•' : 'Send Message';
        
        // Scroll to message
        messageContainer.scrollIntoView({ behavior: 'smooth' });
    }
});
    </script>
</body>
</html>
